<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>スクロールエフェクト</title>
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="format-detection" content="telephone=no">
<link rel="stylesheet" href="css/default.css">
<style>
@-webkit-keyframes animatio_bounce{
	0%, 20%, 50%, 80%, 100%{
		-webkit-transform:translateY(0);
		transform:translateY(0);
	}
	40%{
		-webkit-transform:translateY(-30px);
		transform:translateY(-30px);
	}
	60%{
		-webkit-transform:translateY(-15px);
		transform:translateY(-15px);
	}
}

@keyframes animatio_bounce{
	0%, 20%, 50%, 80%, 100%{
		-webkit-transform:translateY(0);
		-ms-transform:translateY(0);
		transform:translateY(0);
	}
	40%{
		-webkit-transform:translateY(-30px);
		-ms-transform:translateY(-30px);
		transform:translateY(-30px);
	}
	60%{
		-webkit-transform:translateY(-15px);
		-ms-transform:translateY(-15px);
		transform:translateY(-15px);
	}
}
</style>
</head>
<body>
	<main id="container">
		<section style="margin:1000px auto;">
			<img src="img/image.jpg" width="300" height="250" loading="lazy" class="scroll_effect" data-scroll-effect-animation-name="animatio_bounce" data-scroll-effect-animation-delay="10s">
		</section>
		<section style="margin:1000px auto;">
			<img src="img/image.jpg" width="300" height="250" loading="lazy" class="scroll_effect" data-scroll-effect-animation-name="animatio_bounce" data-scroll-effect-animation-delay="10s" data-scroll-effect-animation-iteration-count="10">
		</section>
	</main>
	
	<!-- lib -->
	<script src="libs/jquery/3.6.0/jquery.min.js"></script>
	<script>
/*----------------------------- scroll_effect -----------------------------*/
(function($){
	const 
	defaults = {
		elementTarget:'.scroll_effect', 		//対象の要素
		defaultAnimationName:'', 				//アニメーション名称
		defaultAnimationDuration:'1s', 			//アニメーション実行時間
		defaultAnimationIterationCount:'1', 	//アニメーション実行回数
		defaultAnimationFillMode:'forwards', 	//アニメーション実行完了後の状態
		defaultAnimationDelay:'0' 				//アニメーションを遅らせる時間
	};
	$.fn.scrollEffect = function(options){
		let 
		el = this, 
		lenEl = el.length;
		if(lenEl === 0)
		return this;
		if(lenEl > 1){
			el.each(function(){
				$(this).scrollEffect(options);
			});
			return this;
		}
		let 
		configs = {}, 
		posEl = false, 
		indexEl, 
		//初期実行用関数
		funcInit = () => {
			funcPutVar();
			funcAddEventListener();
			funcDestructor0();
		}, 
		//初期編集代入用関数
		funcPutVar = () => {
			configs = $.extend(
				{}, 
				defaults, 
				options 
			);
			indexEl = $(configs.elementTarget).index(el);
		}, 
		//イベントリスナー追加用関数
		funcAddEventListener = () => {
			const 
			win = $(window), 
			funcPutCssAnimate = () => {
				let 
				dataAnimationName = el.attr('data-scroll-effect-animation-name'), 
				dataAnimationDuration = el.attr('data-scroll-effect-animation-duration'), 
				dataAnimationIterationCount = el.attr('data-scroll-effect-animation-iteration-count'), 
				dataAnimationFillMode = el.attr('data-scroll-effect-animation-fill-mode'), 
				dataAnimationDelay = el.attr('data-scroll-effect-animation-delay');
				el.css({
					'-webkit-animation-name':typeof dataAnimationName === 'string'?dataAnimationName:configs.defaultAnimationName, 
					'animation-name':typeof dataAnimationName === 'string'?dataAnimationName:configs.defaultAnimationName, 
					'animation-duration':typeof dataAnimationDuration === 'string'?dataAnimationDuration:configs.defaultAnimationDuration, 
					'animation-iteration-count':typeof dataAnimationIterationCount === 'string'?dataAnimationIterationCount:configs.defaultAnimationIterationCount, 
					'animation-fill-mode':typeof dataAnimationFillMode === 'string'?dataAnimationFillMode:configs.defaultAnimationFillMode, 
					'animation-delay':typeof dataAnimationDelay === 'string'?dataAnimationDelay:configs.defaultAnimationDelay 
				});
			}, 
			funcConfirmScroll = () => {
				const 
				scrollTop = win.scrollTop(), 
				winHeight = win.height(), 
				posEl = el.offset().top;
				if(posEl <= scrollTop + winHeight){
					funcPutCssAnimate();
					funcRemoveEventListener(indexEl);
				}
			};
			win.on(
				'load.scrollEffect' + indexEl + ' scroll.scrollEffect' + indexEl, 
				funcConfirmScroll 
			);
		}, 
		//アニメーション実行後イベントリスナー削除用関数
		funcRemoveEventListener = (indexEl) => {
			const 
			win = $(window);
			win.off('load.scrollEffect' + indexEl + ' scroll.scrollEffect' + indexEl);
		}, 
		//初期変数メモリー開放用関数
		funcDestructor0 = () => {
			lenEl = 
			funcInit = 
			funcPutVar = 
			funcAddEventListener = 
			funcDestructor0 = void 0;
		}, 
		//アニメーション実行後メモリー開放用関数
		funcDestructor1 = () => {
			funcRemoveEventListener = 
			funcDestructor1 = void 0;
		};
		funcInit();
		return this;
	};
})(jQuery);
/*----------------------------- /scroll_effect -----------------------------*/
(function($){
	$(document).ready(function(){
		const 
		configs = {};
		$('.scroll_effect').scrollEffect(configs);
	});
})(jQuery);
	</script>
</body>
</html>